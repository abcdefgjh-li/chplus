// .ch 解释器乘方运算符测试

// 定义函数（在主函数外部）
定义(整型) 平方(定义(整型) n) {
    返回 n ^ 2;
}

定义(小数) 立方(定义(小数) n) {
    返回 n ^ 3.0;
}

定义(空类型) 主函数() {
    控制台输出("=== .ch 解释器乘方运算符测试 ===");
    
    // ========== 测试1: 基本整数乘方 ==========
    控制台输出("\n--- 测试1: 基本整数乘方 ---");
    
    定义(整型) a = 2;
    定义(整型) b = 3;
    控制台输出("整数乘方测试:");
    控制台输出("2 ^ 3 = " + (a ^ b));  // 应该输出8
    控制台输出("5 ^ 2 = " + (5 ^ 2));  // 应该输出25
    控制台输出("3 ^ 4 = " + (3 ^ 4));  // 应该输出81
    
    // ========== 测试2: 小数乘方 ==========
    控制台输出("\n--- 测试2: 小数乘方 ---");
    
    定义(小数) x = 2.0;
    定义(小数) y = 3.0;
    控制台输出("小数乘方测试:");
    控制台输出("2.0 ^ 3.0 = " + (x ^ y));  // 应该输出8
    控制台输出("3.14 ^ 2 = " + (3.14 ^ 2));  // 应该输出约9.86
    控制台输出("4.0 ^ 0.5 = " + (4.0 ^ 0.5));  // 应该输出2.0
    
    // ========== 测试3: 边界情况 ==========
    控制台输出("\n--- 测试3: 边界情况 ---");
    
    控制台输出("边界情况测试:");
    控制台输出("任何数 ^ 0 = " + (10 ^ 0));  // 应该输出1
    控制台输出("1 ^ 任何数 = " + (1 ^ 5));  // 应该输出1
    控制台输出("0 ^ 0 = " + (0 ^ 0));  // 应该输出1
    控制台输出("2 ^ 1 = " + (2 ^ 1));  // 应该输出2
    
    // ========== 测试4: 复杂表达式 ==========
    控制台输出("\n--- 测试4: 复杂表达式 ---");
    
    定义(整型) base = 2;
    定义(整型) exp = 5;
    定义(整型) result = base ^ exp;
    控制台输出("复杂表达式测试:");
    控制台输出("2 ^ 5 = " + result);  // 应该输出32
    
    // 嵌套乘方
    控制台输出("2 ^ (3 ^ 2) = " + (2 ^ (3 ^ 2)));  // 应该是512 (2^9)
    
    // 乘方与其他运算符混合
    控制台输出("2 ^ 3 + 4 = " + ((2 ^ 3) + 4));  // 应该是12 (8+4)
    控制台输出("(2 + 3) ^ 2 = " + ((2 + 3) ^ 2));  // 应该是25 (5^2)
    
    // ========== 测试5: 在函数中使用 ==========
    控制台输出("\n--- 测试5: 在函数中使用 ---");
    
    控制台输出("在函数中使用乘方:");
    控制台输出("5的平方 = " + 平方(5));  // 应该输出25
    控制台输出("3.0的立方 = " + 立方(3.0));  // 应该输出27
    控制台输出("2.5的立方 = " + 立方(2.5));  // 应该输出15.625
    
    // ========== 测试6: 在条件判断中使用 ==========
    控制台输出("\n--- 测试6: 在条件判断中使用 ---");
    
    定义(整型) testNum = 4;
    如果 ((testNum ^ 2) > 15) {
        控制台输出("4 ^ 2 = 16 > 15，条件为真");
    } 否则 {
        控制台输出("4 ^ 2 <= 15，条件为假");
    }
    
    // ========== 测试7: 在循环中使用 ==========
    控制台输出("\n--- 测试7: 在循环中使用 ---");
    
    控制台输出("计算1到5的平方:");
    定义(整型) i = 1;
    当 (i <= 5) {
        控制台输出(i + " ^ 2 = " + (i ^ 2));
        i = i + 1;
    }
    
    // ========== 测试8: 在数组中使用 ==========
    控制台输出("\n--- 测试8: 在数组中使用 ---");
    
    定义(整型) powers[3];
    powers[0] = 2 ^ 3;  // 8
    powers[1] = 4 ^ 2;  // 16
    powers[2] = 5 ^ 2;  // 25
    
    控制台输出("数组中的乘方结果:");
    控制台输出("powers[0] = " + powers[0]);  // 8
    控制台输出("powers[1] = " + powers[1]);  // 16
    控制台输出("powers[2] = " + powers[2]);  // 25
    
    // ========== 测试完成 ==========
    控制台输出("\n=== 乘方运算符测试完成 ===");
}